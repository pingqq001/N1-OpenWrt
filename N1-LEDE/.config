# ====== 64位核心架构配置 ======
CONFIG_TARGET_arm64=y
CONFIG_64BIT=y
CONFIG_ARCH_64BIT=y
CONFIG_TARGET_BOARD="amlogic"
CONFIG_TARGET_SUBTARGET="armv8"
CONFIG_TARGET_ARCH_PACKAGES="aarch64_cortex-a53"
CONFIG_CPU_TYPE="cortex-a53-crypto"
CONFIG_DEFAULT_TARGET_OPTIMIZATION="-Os -pipe -mcpu=cortex-a53"

# ====== 设备专属配置 ======
CONFIG_TARGET_amlogic=y
CONFIG_TARGET_amlogic_mesongx=y
CONFIG_TARGET_amlogic_mesongx_DEVICE_phicomm_n1=y
CONFIG_TARGET_amlogic_mesongx_64bit=y
CONFIG_TARGET_PROFILE="DEVICE_phicomm_n1"

# ====== 内核配置 ======
CONFIG_LINUX_5_15_ARM64=y
CONFIG_HAS_SUBTARGETS=y
CONFIG_HAS_DEVICES=y

# ====== 镜像生成设置 ======
CONFIG_TARGET_amlogic_mesongx_DEVICE_phicomm_n1_IMAGE_RAW=y
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_EXT4_BLOCKSIZE=4096
CONFIG_TARGET_EXT4_BLOCKSIZE_4K=y
CONFIG_TARGET_ROOTFS_TARGZ=y
CONFIG_TARGET_ROOTFS_INITRAMFS=n

# ====== 编译优化 ======
CONFIG_DEVEL=y
CONFIG_CCACHE=y
CONFIG_BUILD_LOG=y

# ====== MariaDB 数据库服务器 ======
CONFIG_PACKAGE_mariadb-server=y
CONFIG_PACKAGE_mariadb-server-extra=y
CONFIG_PACKAGE_mariadb-client=y
CONFIG_MARIADB_CLIENT_ICU=y
CONFIG_MARIADB_SERVER_ICU=y
CONFIG_PACKAGE_libmariadb=y
CONFIG_PACKAGE_libmariadbclient=y
CONFIG_PACKAGE_libmariadbd=y

# ====== iStore 应用商店 ======
CONFIG_PACKAGE_luci-app-store=y
CONFIG_PACKAGE_luci-lib-ipkg=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-lib-xterm=y
CONFIG_PACKAGE_luci-lib-fs=y
CONFIG_PACKAGE_luci-lib-form=y

# ====== 网络基础服务 ======
CONFIG_PACKAGE_6in4=y
CONFIG_PACKAGE_ipv6helper=y
CONFIG_PACKAGE_ip6tables=y
CONFIG_PACKAGE_ip6tables-extra=y
CONFIG_PACKAGE_ip6tables-mod-nat=y

# ====== USB支持 ======
CONFIG_PACKAGE_kmod-usb2=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-hid=y
CONFIG_PACKAGE_kmod-usb-net=y
CONFIG_PACKAGE_kmod-usb-storage=y
CONFIG_PACKAGE_kmod-usb-storage-extras=y

# ====== Luci应用 ======
CONFIG_PACKAGE_luci-app-amlogic=y
CONFIG_PACKAGE_luci-app-dockerman=y
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_luci-app-samba4=y
CONFIG_PACKAGE_luci-app-vlmcsd=y
CONFIG_PACKAGE_luci-app-uhttpd=y
CONFIG_PACKAGE_luci-app-frpc=y
CONFIG_PACKAGE_luci-app-socat=y
CONFIG_PACKAGE_luci-app-cifs-mount=y
CONFIG_PACKAGE_luci-app-wol=y
CONFIG_PACKAGE_luci-app-mosdns=y
CONFIG_PACKAGE_luci-app-alist=y
CONFIG_PACKAGE_luci-app-ttyd=y

# ====== 主题配置 ======
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y

# ====== VPN服务 ======
CONFIG_PACKAGE_luci-app-openvpn-server=y
CONFIG_PACKAGE_luci-app-zerotier=y

# ====== 网络加速 ======
CONFIG_PACKAGE_luci-app-turboacc=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_BBR_CCA=y
CONFIG_PACKAGE_luci-app-turboacc_INCLUDE_DNSFORWARDER=y

# ====== 精简无用模块 ======
CONFIG_PACKAGE_luci-app-accesscontrol=n
CONFIG_PACKAGE_luci-app-upnp=n
CONFIG_PACKAGE_luci-app-arpbind=n
CONFIG_PACKAGE_luci-app-ddns=n
CONFIG_PACKAGE_ddns-scripts=n

# ====== 系统工具 ======
CONFIG_PACKAGE_fstrim=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_iperf3=y
CONFIG_PACKAGE_openssh-sftp-server=y
CONFIG_PACKAGE_vim-fuller=y
CONFIG_PACKAGE_zsh=y
CONFIG_PACKAGE_blkid=y
CONFIG_PACKAGE_lsblk=y
CONFIG_PACKAGE_jq=y
CONFIG_PACKAGE_pv=y
CONFIG_PACKAGE_bash=y
CONFIG_PACKAGE_coreutils=y

# ====== 文件系统支持 ======
CONFIG_PACKAGE_btrfs-progs=y
CONFIG_PACKAGE_dosfstools=y
CONFIG_PACKAGE_e2fsprogs=y
CONFIG_PACKAGE_ntfs-3g=y
CONFIG_PACKAGE_xfs-fsck=y
CONFIG_PACKAGE_xfs-mkfs=y
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_kmod-fs-vfat=y
CONFIG_PACKAGE_kmod-fs-exfat=y

# add wifi
CONFIG_PACKAGE_kmod-brcmfmac=y
CONFIG_BRCMFMAC_SDIO=y
CONFIG_PACKAGE_kmod-brcmutil=y
CONFIG_PACKAGE_kmod-cfg80211=y
CONFIG_PACKAGE_kmod-mac80211=y
CONFIG_PACKAGE_hostapd-common=y
CONFIG_PACKAGE_wpa-cli=y
CONFIG_PACKAGE_wpad-basic=y
CONFIG_PACKAGE_iw=y
CONFIG_TARGET_ROOTFS_PARTSIZE=170   # 关键修改
CONFIG_PACKAGE_luci=y               # 按需精简
CONFIG_PACKAGE_luci-app-adguardhome=n  # 移除大型插件
CONFIG_PACKAGE_wpad-basic=y         # 替代 wpad-openssl


# ====== 网络工具 ======
CONFIG_PACKAGE_iperf3-ssl=y

# ====== 移除冗余驱动 ======
# CONFIG_PACKAGE_kmod-brcmfmac is not set
# CONFIG_PACKAGE_kmod-brcmutil is not set
# CONFIG_PACKAGE_wpad-basic is not set

# ====== 64位验证包 ======
CONFIG_PACKAGE_libc=y
CONFIG_LIBC="musl"
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE_libstdcpp=y


